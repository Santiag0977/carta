<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Un Regalo Especial Para Ti</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Dancing+Script:wght@400;700&family=Pacifico&family=Montserrat:wght@300;400;500&family=Great+Vibes&family=Satisfy&display=swap');
        
        :root {
            --primary-color: #ff6b9d;
            --secondary-color: #ffb6c1;
            --accent-color: #ff4785;
            --text-color: #333;
            --light-bg: #fff5f7;
            --candy-color-1: #FF5252;
            --candy-color-2: #42A5F5;
            --candy-color-3: #66BB6A;
            --candy-color-4: #FFA726;
            --candy-color-5: #AB47BC;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Montserrat', sans-serif;
            background-color: var(--light-bg);
            background-image: url('https://img.freepik.com/free-vector/cute-mickey-mouse-pattern_1194-6728.jpg?w=740');
            background-size: 200px;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            transition: all 1.5s cubic-bezier(0.68, -0.55, 0.27, 1.55);
            overflow-x: hidden;
            position: relative;
        }
        
        /* Part√≠culas flotantes */
        .particles-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 1;
            opacity: 0;
            transition: opacity 2s ease;
        }
        
        .particle {
            position: absolute;
            background-repeat: no-repeat;
            background-size: contain;
            pointer-events: none;
            opacity: 0;
            animation: float 15s linear infinite;
        }
        
        .candy {
            width: 24px;
            height: 24px;
            background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' width='24' height='24'%3E%3Cpath fill='%23FF5252' d='M15.5 8a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3zm0 2a3.5 3.5 0 1 0 0-7 3.5 3.5 0 0 0 0 7zm-7 4a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3zm0 2a3.5 3.5 0 1 0 0-7 3.5 3.5 0 0 0 0 7zM18 12l-3.4 1.9-1.7-1.1-.5.9 1 .6-3.4 2L6 12l3.4-2 3.4-2 1.7 1.1.5-.9-1-.6 3.4-1.9L22 12l-4 2.3z'/%3E%3C/svg%3E");
        }
        
        .lollipop {
            width: 24px;
            height: 24px;
            background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' width='24' height='24'%3E%3Cpath fill='%2342A5F5' d='M10 10.5a1.5 1.5 0 1 1 3 0 1.5 1.5 0 0 1-3 0zm1.5-3a3 3 0 1 0 0 6 3 3 0 0 0 0-6zm0-3c-3.3 0-6 2.7-6 6s2.7 6 6 6c2.2 0 4.1-1.2 5.2-3h-.3c-1.1 1.8-3 3-5.2 3-3.3 0-6-2.7-6-6s2.7-6 6-6c2.2 0 4.1 1.2 5.2 3h.3c-1.1-1.8-3-3-5.2-3zm0-1c-4.4 0-8 3.6-8 8s3.6 8 8 8 8-3.6 8-8-3.6-8-8-8zm5 9v7h1v-7h-1z'/%3E%3C/svg%3E");
        }
        
        @keyframes float {
            0% {
                transform: translateY(100vh) scale(0.5) rotate(0deg);
                opacity: 0.7;
            }
            100% {
                transform: translateY(-100px) scale(1.2) rotate(360deg);
                opacity: 0;
            }
        }
        
        /* Contenedor principal */
        .container {
            width: 90%;
            max-width: 500px;
            padding: 2.5rem;
            background-color: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.15);
            text-align: center;
            transition: all 0.8s cubic-bezier(0.68, -0.55, 0.27, 1.55);
            z-index: 10;
            position: relative;
            overflow: hidden;
        }
        
        .container::before {
            content: '';
            position: absolute;
            top: -10px;
            left: -10px;
            right: -10px;
            bottom: -10px;
            background: linear-gradient(45deg, var(--candy-color-1), var(--candy-color-2), var(--candy-color-3), var(--candy-color-4), var(--candy-color-5));
            background-size: 400% 400%;
            z-index: -1;
            filter: blur(20px);
            opacity: 0.5;
            animation: gradientBG 15s ease infinite;
            border-radius: 25px;
        }
        
        @keyframes gradientBG {
            0% {
                background-position: 0% 50%;
            }
            50% {
                background-position: 100% 50%;
            }
            100% {
                background-position: 0% 50%;
            }
        }
        
        /* Formulario de login */
        .login-form {
            display: flex;
            flex-direction: column;
            gap: 1.8rem;
        }
        
        h1 {
            color: var(--primary-color);
            margin-bottom: 1.5rem;
            font-size: 2.2rem;
            font-family: 'Pacifico', cursive;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);
        }
        
        .input-container {
            position: relative;
        }
        
        input {
            width: 100%;
            padding: 15px 20px;
            border: 2px solid var(--secondary-color);
            border-radius: 50px;
            font-size: 1.1rem;
            transition: all 0.3s ease;
            background-color: rgba(255, 255, 255, 0.9);
            text-align: center;
            letter-spacing: 2px;
        }
        
        input:focus {
            outline: none;
            border-color: var(--primary-color);
            box-shadow: 0 0 15px rgba(255, 107, 157, 0.4);
            transform: scale(1.02);
        }
        
        .password-icon {
            position: absolute;
            right: 20px;
            top: 50%;
            transform: translateY(-50%);
            color: var(--primary-color);
            font-size: 1.2rem;
        }
        
        button {
            background: linear-gradient(45deg, var(--candy-color-1), var(--candy-color-4));
            color: white;
            border: none;
            padding: 15px 25px;
            border-radius: 50px;
            font-size: 1.1rem;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(255, 107, 157, 0.4);
            position: relative;
            overflow: hidden;
        }
        
        button::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
            transition: all 0.5s ease;
        }
        
        button:hover {
            transform: translateY(-5px);
            box-shadow: 0 7px 20px rgba(255, 107, 157, 0.5);
        }
        
        button:hover::before {
            left: 100%;
        }
        
        .error-message {
            color: #ff3366;
            font-size: 0.95rem;
            height: 20px;
            margin-top: 0.5rem;
            opacity: 0;
            transition: opacity 0.3s ease;
        }
        
        .error-message.visible {
            opacity: 1;
        }
        
        /* Sobre y carta */
        .envelope {
            width: 100%;
            max-width: 600px;
            aspect-ratio: 1.6/1;
            background-color: #ffb6c1;
            border-radius: 20px;
            position: relative;
            box-shadow: 0 15px 40px rgba(0, 0, 0, 0.2);
            transform-style: preserve-3d;
            perspective: 1000px;
            transition: all 1s cubic-bezier(0.68, -0.55, 0.27, 1.55);
            display: none;
            margin-bottom: 2rem;
        }
        
        .envelope-front {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, var(--candy-color-1), var(--candy-color-4));
            border-radius: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            transform-origin: top;
            transition: transform 1.5s cubic-bezier(0.68, -0.55, 0.27, 1.55);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            overflow: hidden;
        }
        
        .envelope-front::before {
            content: '';
            position: absolute;
            width: 0;
            height: 0;
            border-left: 50% solid transparent;
            border-right: 50% solid transparent;
            border-bottom: 30px solid var(--candy-color-1);
            top: 0;
            transform: translateY(-50%);
        }
        
        .envelope-front.open {
            transform: rotateX(180deg);
        }
        
        .envelope-candy {
            font-size: 5rem;
            color: white;
            text-shadow: 0 2px 10px rgba(0, 0, 0, 0.2);
        }
        
        .letter-container {
            width: 90%;
            max-width: 600px;
            display: none;
            opacity: 0;
            transform: translateY(20px);
            transition: all 1s ease;
        }
        
        .letter {
            width: 100%;
            min-height: 500px;
            background-color: white;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.15);
            padding: 2.5rem;
            position: relative;
            transition: all 0.5s ease;
            overflow: hidden;
        }
        
        .letter::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-image: url("data:image/svg+xml,%3Csvg width='100' height='100' viewBox='0 0 100 100' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M11 18c3.866 0 7-3.134 7-7s-3.134-7-7-7-7 3.134-7 7 3.134 7 7 7zm48 25c3.866 0 7-3.134 7-7s-3.134-7-7-7-7 3.134-7 7 3.134 7 7 7zm-43-7c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zm63 31c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zM34 90c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zm56-76c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zM12 86c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm28-65c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm23-11c2.76 0 5-2.24 5-5s-2.24-5-5-5-5 2.24-5 5 2.24 5 5 5zm-6 60c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm29 22c2.76 0 5-2.24 5-5s-2.24-5-5-5-5 2.24-5 5 2.24 5 5 5zM32 63c2.76 0 5-2.24 5-5s-2.24-5-5-5-5 2.24-5 5 2.24 5 5 5zm57-13c2.76 0 5-2.24 5-5s-2.24-5-5-5-5 2.24-5 5 2.24 5 5 5zm-9-21c1.105 0 2-.895 2-2s-.895-2-2-2-2 .895-2 2 .895 2 2 2zM60 91c1.105 0 2-.895 2-2s-.895-2-2-2-2 .895-2 2 .895 2 2 2zM35 41c1.105 0 2-.895 2-2s-.895-2-2-2-2 .895-2 2 .895 2 2 2zM12 60c1.105 0 2-.895 2-2s-.895-2-2-2-2 .895-2 2 .895 2 2 2z' fill='%23ffb6c1' fill-opacity='0.1' fill-rule='evenodd'/%3E%3C/svg%3E");
            opacity: 0.5;
            z-index: -1;
        }
        
        .font-selector {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin-bottom: 15px;
        }
        
        .font-option {
            width: 30px;
            height: 30px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 2px solid transparent;
            font-weight: bold;
            font-size: 16px;
        }
        
        .font-option:hover {
            transform: scale(1.1);
        }
        
        .font-option.active {
            border-color: var(--primary-color);
            box-shadow: 0 0 10px rgba(255, 107, 157, 0.3);
        }
        
        .font-option:nth-child(1) {
            font-family: 'Dancing Script', cursive;
        }
        
        .font-option:nth-child(2) {
            font-family: 'Great Vibes', cursive;
        }
        
        .font-option:nth-child(3) {
            font-family: 'Satisfy', cursive;
        }
        
        .letter-content {
            font-family: 'Dancing Script', cursive;
            font-size: 1.5rem;
            color: var(--text-color);
            min-height: 350px;
            outline: none;
            line-height: 1.6;
            transition: all 0.3s ease;
            text-align: left;
            white-space: pre-line;
        }
        
        .letter-content:focus {
            box-shadow: none;
        }
        
        .letter-content[contenteditable]:empty:before {
            content: "Escribe tu mensaje aqu√≠...";
            color: #aaa;
        }
        
        .add-photo {
            position: absolute;
            bottom: 20px;
            right: 20px;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background-color: var(--candy-color-4);
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.2);
            transition: all 0.3s ease;
            z-index: 5;
        }
        
        .add-photo:hover {
            transform: scale(1.1);
            background-color: var(--candy-color-1);
        }
        
        .photo-input {
            display: none;
        }
        
        .photos-container {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-top: 20px;
            justify-content: center;
        }
        
        .photo-preview {
            width: 100px;
            height: 100px;
            object-fit: cover;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
            transition: all 0.3s ease;
            cursor: pointer;
        }
        
        .photo-preview:hover {
            transform: scale(1.05);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        }
        
        .signature {
            font-family: 'Dancing Script', cursive;
            font-size: 1.4rem;
            color: var(--candy-color-1);
            text-align: right;
            margin-top: 2rem;
            font-weight: bold;
        }
        
        /* Controles de m√∫sica */
        .music-panel {
            position: fixed;
            bottom: 20px;
            right: 20px;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 10px;
            z-index: 100;
        }
        
        .music-dropdown {
            position: absolute;
            bottom: 60px;
            right: 0;
            background-color: white;
            border-radius: 15px;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.2);
            padding: 15px;
            width: 200px;
            display: none;
            transform: translateY(10px);
            opacity: 0;
            transition: all 0.3s ease;
        }
        
        .music-dropdown.show {
            display: block;
            transform: translateY(0);
            opacity: 1;
        }
        
        .music-option {
            padding: 10px;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.2s ease;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .music-option:hover {
            background-color: var(--light-bg);
        }
        
        .music-option.active {
            background-color: var(--secondary-color);
            color: white;
        }
        
        .music-control {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background: linear-gradient(45deg, var(--candy-color-1), var(--candy-color-4));
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
            transition: all 0.3s ease;
            font-size: 1.2rem;
        }
        
        .music-control:hover {
            transform: scale(1.1);
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.3);
        }
        
        /* Confeti */
        .confetti {
            position: fixed;
            width: 10px;
            height: 10px;
            background-color: #f2d74e;
            opacity: 0;
            z-index: 1000;
            animation: confetti-fall 5s ease-in-out forwards;
        }
        
        @keyframes confetti-fall {
            0% {
                opacity: 1;
                transform: translateY(-100vh) rotate(0deg);
            }
            100% {
                opacity: 0;
                transform: translateY(100vh) rotate(720deg);
            }
        }
        
        /* Responsive */
        @media (max-width: 768px) {
            .container {
                width: 95%;
                padding: 1.8rem;
            }
            
            h1 {
                font-size: 1.8rem;
            }
            
            .letter-content {
                font-size: 1.3rem;
            }
            
            .envelope {
                max-width: 95%;
            }
            
            .music-panel {
                bottom: 10px;
                right: 10px;
            }
            
            .music-dropdown {
                width: 180px;
                right: 0;
            }
        }
        
        /* Animaciones adicionales */
        @keyframes pulse {
            0% {
                transform: scale(1);
            }
            50% {
                transform: scale(1.05);
            }
            100% {
                transform: scale(1);
            }
        }
        
        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        .hidden-message {
            position: absolute;
            bottom: 10px;
            left: 50%;
            transform: translateX(-50%);
            font-size: 0.8rem;
            color: var(--candy-color-4);
            opacity: 0;
            transition: opacity 0.5s ease;
        }
        
        .container:hover .hidden-message {
            opacity: 0.7;
        }
    </style>
</head>
<body>
    <!-- Part√≠culas flotantes -->
    <div class="particles-container" id="particles-container"></div>
    
    <!-- Contenedor de login -->
    <div class="container animate__animated animate__fadeIn" id="login-container">
        <div class="login-form" id="login-form">
            <h1 class="animate__animated animate__pulse animate__infinite">Un Regalo Especial</h1>
            <div class="input-container">
                <input type="password" id="password" placeholder="Ingresa la contrase√±a" autocomplete="off" class="animate__animated animate__fadeInUp animate__delay-1s">
                <span class="password-icon">üç¨</span>
            </div>
            <button id="submit-btn" class="animate__animated animate__fadeInUp animate__delay-1s">Descubrir Sorpresa</button>
            <div class="error-message" id="error-message">Contrase√±a incorrecta. Intent√° de nuevo.</div>
        </div>
        <div class="hidden-message">Hay un mensaje especial para ti...</div>
    </div>
    
    <!-- Sobre -->
    <div class="envelope" id="envelope">
        <div class="envelope-front" id="envelope-front">
            <div class="envelope-candy">üç¨</div>
        </div>
    </div>
    
    <!-- Carta -->
    <div class="letter-container" id="letter-container">
        <div class="font-selector">
            <div class="font-option active" data-font="'Dancing Script', cursive">A</div>
            <div class="font-option" data-font="'Great Vibes', cursive">A</div>
            <div class="font-option" data-font="'Satisfy', cursive">A</div>
        </div>
        <div class="letter">
            <div class="letter-content" id="letter-content" contenteditable="true"></div>
            <div class="photos-container" id="photos-container"></div>
            <div class="signature">Con cari√±o, de Santiago üíï</div>
            <div class="add-photo" id="add-photo">üì∑</div>
            <input type="file" id="photo-input" class="photo-input" accept="image/*" multiple>
        </div>
    </div>
    
    <!-- Panel de m√∫sica -->
    <div class="music-panel">
        <div class="music-dropdown" id="music-dropdown">
            <div class="music-option active" data-music="https://www.soundhelix.com/examples/mp3/SoundHelix-Song-1.mp3">
                <span>üéµ</span> Melod√≠a Suave
            </div>
            <div class="music-option" data-music="https://www.soundhelix.com/examples/mp3/SoundHelix-Song-2.mp3">
                <span>üéµ</span> Piano Rom√°ntico
            </div>
            <div class="music-option" data-music="https://www.soundhelix.com/examples/mp3/SoundHelix-Song-3.mp3">
                <span>üéµ</span> Vals de Amor
            </div>
        </div>
        <div class="music-control" id="music-control">‚ô™</div>
    </div>
    
    <!-- Audio -->
    <audio id="background-music" loop>
        <source src="https://www.soundhelix.com/examples/mp3/SoundHelix-Song-1.mp3" type="audio/mpeg">
    </audio>
    
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Elementos DOM
            const loginContainer = document.getElementById('login-container');
            const envelope = document.getElementById('envelope');
            const envelopeFront = document.getElementById('envelope-front');
            const letterContainer = document.getElementById('letter-container');
            const passwordInput = document.getElementById('password');
            const submitBtn = document.getElementById('submit-btn');
            const errorMessage = document.getElementById('error-message');
            const letterContent = document.getElementById('letter-content');
            const musicControl = document.getElementById('music-control');
            const musicDropdown = document.getElementById('music-dropdown');
            const backgroundMusic = document.getElementById('background-music');
            const musicOptions = document.querySelectorAll('.music-option');
            const fontOptions = document.querySelectorAll('.font-option');
            const addPhoto = document.getElementById('add-photo');
            const photoInput = document.getElementById('photo-input');
            const photosContainer = document.getElementById('photos-container');
            const particlesContainer = document.getElementById('particles-container');
            
            // Variables
            let isMusicPlaying = false;
            let correctPassword = 'roxana';
            
            // Texto de la carta
            const cartaTexto = `Jujuy San Salvador de Jujuy, 16 de Mayo de 2025
Querida Ro

Hoy te escribo una carta... s√≠, una carta Jajaja. Hace ya varios a√±os debat√≠amos sobre si alguna vez escribir√≠amos una, qu√© sentido tendr√≠a, si todav√≠a val√≠an la pena‚Ä¶ Bueno, al parecer, s√≠.
Primero quer√≠a felicitarte por tu cumplea√±os n√∫mero 21, buen n√∫mero como decis, espero que el pasado 12 del corriente mes hayas pasado un lindo dia lleno de alegr√≠a, amor, familia y buenos amigos. Y espero poder compartir y festejar muchos m√°s con vos.
En segundo lugar me gustar√≠a darte gracias por tu sincera amistad, (hace mucho la verdad que no escribo as√≠ que estoy un poco oxidado, esta m√°quina de facha se oxida üòú). Retomando, creo que es una muy buena oportunidad para agradecerte por tu amistad sana y fiel. Se me vienen a la cabeza muchos momentos compartidos y los recuerdo con mucho cari√±o. Ojal√° la vida ‚Äîesa l√≠nea fina, demasiado fina y corta‚Äî nos siga regalando muchos m√°s.
Por √∫ltimo desearte todo lo bueno, sabes que te apoyo y te recuerdo que tenes mi apoyo para aquello que necesites. Rox, muchos √©xitos para el presente y para lo que te depara, de lo cual estoy seguro que son cosas buenas.
Gracias por poder compartir con vos, algo tan bueno y noble como es la Fe.

Antes de finalizar la eminent√≠sima carta, te regalo un frase que me gusta mucho: "¬°No esperes la Republica de Platon!"

Saludos, te mando un fuerte abrazo

Santiago tu buen amigo`;
            
            // Cambiar el fondo a Mickey Mouse para la pantalla de login
            document.body.style.backgroundImage = "url('https://img.freepik.com/free-vector/cute-mickey-mouse-pattern_1194-6728.jpg?w=740')";
            document.body.style.backgroundColor = "#ffebf2";
            
            // Verificar contrase√±a
            submitBtn.addEventListener('click', checkPassword);
            passwordInput.addEventListener('keypress', function(e) {
                if (e.key === 'Enter') {
                    checkPassword();
                }
            });
            
            // Control de m√∫sica
            musicControl.addEventListener('click', function() {
                musicDropdown.classList.toggle('show');
            });
            
            document.addEventListener('click', function(e) {
                if (!musicControl.contains(e.target) && !musicDropdown.contains(e.target)) {
                    musicDropdown.classList.remove('show');
                }
            });
            
            musicOptions.forEach(option => {
                option.addEventListener('click', function() {
                    const musicSrc = this.getAttribute('data-music');
                    backgroundMusic.src = musicSrc;
                    
                    musicOptions.forEach(opt => opt.classList.remove('active'));
                    this.classList.add('active');
                    
                    if (isMusicPlaying) {
                        backgroundMusic.play();
                    }
                    
                    musicDropdown.classList.remove('show');
                });
            });
            
            musicControl.addEventListener('click', function(e) {
                e.stopPropagation();
                
                if (!musicDropdown.classList.contains('show')) {
                    if (isMusicPlaying) {
                        backgroundMusic.pause();
                        musicControl.innerHTML = '‚ô™';
                        isMusicPlaying = false;
                    } else {
                        backgroundMusic.play();
                        musicControl.innerHTML = '‚ñ†';
                        isMusicPlaying = true;
                    }
                }
            });
            
            // Cambiar fuente
            fontOptions.forEach(option => {
                option.addEventListener('click', function() {
                    const fontFamily = this.getAttribute('data-font');
                    letterContent.style.fontFamily = fontFamily;
                    
                    fontOptions.forEach(opt => opt.classList.remove('active'));
                    this.classList.add('active');
                });
            });
            
            // A√±adir fotos
            addPhoto.addEventListener('click', function() {
                photoInput.click();
            });
            
            photoInput.addEventListener('change', function() {
                const files = this.files;
                
                for (let i = 0; i < files.length; i++) {
                    const file = files[i];
                    const reader = new FileReader();
                    
                    reader.onload = function(e) {
                        const img = document.createElement('img');
                        img.src = e.target.result;
                        img.className = 'photo-preview';
                        img.addEventListener('click', function() {
                            const fullImg = document.createElement('img');
                            fullImg.src = this.src;
                            fullImg.style.maxWidth = '100%';
                            fullImg.style.borderRadius = '10px';
                            fullImg.style.marginBottom = '15px';
                            
                            // Insertar la imagen en el contenido de la carta
                            const selection = window.getSelection();
                            const range = selection.getRangeAt(0);
                            range.insertNode(fullImg);
                            
                            // Mover el cursor despu√©s de la imagen
                            range.setStartAfter(fullImg);
                            range.setEndAfter(fullImg);
                            selection.removeAllRanges();
                            selection.addRange(range);
                            
                            // A√±adir un salto de l√≠nea despu√©s de la imagen
                            const br = document.createElement('br');
                            range.insertNode(br);
                            range.setStartAfter(br);
                            range.setEndAfter(br);
                            selection.removeAllRanges();
                            selection.addRange(range);
                        });
                        photosContainer.appendChild(img);
                    };
                    
                    reader.readAsDataURL(file);
                }
            });
            
            // Crear part√≠culas flotantes (caramelos)
            function createParticles() {
                particlesContainer.innerHTML = '';
                
                for (let i = 0; i < 30; i++) {
                    createParticle('candy');
                }
                
                for (let i = 0; i < 20; i++) {
                    createParticle('lollipop');
                }
                
                particlesContainer.style.opacity = '1';
            }
            
            function createParticle(type) {
                const particle = document.createElement('div');
                particle.className = `particle ${type}`;
                
                // Posici√≥n aleatoria
                const posX = Math.random() * window.innerWidth;
                const delay = Math.random() * 15;
                const duration = 10 + Math.random() * 20;
                const scale = 0.5 + Math.random() * 1.5;
                
                particle.style.left = `${posX}px`;
                particle.style.animationDelay = `${delay}s`;
                particle.style.animationDuration = `${duration}s`;
                particle.style.transform = `scale(${scale})`;
                particle.style.opacity = '0';
                
                setTimeout(() => {
                    particle.style.opacity = '0.7';
                }, delay * 1000);
                
                particlesContainer.appendChild(particle);
            }
            
            // Crear confeti
            function createConfetti() {
                for (let i = 0; i < 100; i++) {
                    const confetti = document.createElement('div');
                    confetti.className = 'confetti';
                    
                    // Colores aleatorios de caramelos
                    const colors = ['#FF5252', '#42A5F5', '#66BB6A', '#FFA726', '#AB47BC', '#FF99CC'];
                    const color = colors[Math.floor(Math.random() * colors.length)];
                    confetti.style.backgroundColor = color;
                    
                    // Posici√≥n y tama√±o aleatorios
                    const posX = Math.random() * window.innerWidth;
                    const size = Math.random() * 10 + 5;
                    const delay = Math.random() * 3;
                    
                    confetti.style.left = `${posX}px`;
                    confetti.style.width = `${size}px`;
                    confetti.style.height = `${size}px`;
                    confetti.style.animationDelay = `${delay}s`;
                    
                    document.body.appendChild(confetti);
                    
                    // Eliminar despu√©s de la animaci√≥n
                    setTimeout(() => {
                        confetti.remove();
                    }, 5000 + delay * 1000);
                }
            }
            
            function checkPassword() {
                const password = passwordInput.value;
                
                if (password.toLowerCase() === correctPassword) {
                    // Cambiar el fondo a flores suaves
                    document.body.style.backgroundImage = "url('https://img.freepik.com/free-vector/hand-drawn-floral-pattern_23-2149057079.jpg?w=740')";
                    
                    // Crear confeti
                    createConfetti();
                    
                    // Crear part√≠culas
                    createParticles();
                    
                    // Ocultar formulario con animaci√≥n
                    loginContainer.classList.add('animate__fadeOutUp');
                    setTimeout(() => {
                        loginContainer.style.display = 'none';
                        
                        // Mostrar sobre
                        envelope.style.display = 'block';
                        setTimeout(() => {
                            envelope.style.opacity = '1';
                            envelope.style.transform = 'scale(1)';
                            
                            // Animar apertura del sobre despu√©s de un momento
                            setTimeout(() => {
                                envelopeFront.classList.add('open');
                                
                                // Mostrar la carta despu√©s de abrir el sobre
                                setTimeout(() => {
                                    letterContainer.style.display = 'block';
                                    setTimeout(() => {
                                        letterContainer.style.opacity = '1';
                                        letterContainer.style.transform = 'translateY(0)';
                                        
                                        // Establecer el texto de la carta
                                        letterContent.textContent = cartaTexto;
                                    }, 100);
                                }, 1000);
                            }, 1000);
                        }, 100);
                    }, 500);
                    
                    // Reproducir m√∫sica autom√°ticamente
                    setTimeout(() => {
                        backgroundMusic.play();
                        musicControl.innerHTML = '‚ñ†';
                        isMusicPlaying = true;
                    }, 2000);
                } else {
                    // Mostrar mensaje de error
                    errorMessage.classList.add('visible');
                    
                    // Agitar el formulario
                    loginContainer.classList.add('animate__shakeX');
                    setTimeout(() => {
                        loginContainer.classList.remove('animate__shakeX');
                    }, 500);
                    
                    // Limpiar el campo de contrase√±a
                    passwordInput.value = '';
                    passwordInput.focus();
                }
            }
            
            // Mensaje secreto en consola
            console.log("%cüç¨ Un regalo dulce hecho con cari√±o üç¨", "color: #FF5252; font-size: 20px; font-weight: bold;");
        });
    </script>
</body>
</html>